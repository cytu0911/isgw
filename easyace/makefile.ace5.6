CXX=g++

CFLAGS=-DEASYACE_USE_DEV_POLL -g
LDFLAGS=-static 

ifeq ($(BIT), 64)
CFLAGS:=$(CFLAGS) -m64
LDFLAGS:=$(LDFLAGS) -shared -fPIC
TARGET:=libeasyace5.6_lib$(BIT).a
else
BIT:=32
CFLAGS:=$(CFLAGS) -m32
LDFLAGS:=$(LDFLAGS) -shared -fPIC -m elf_i386
TARGET:=libeasyace5.6_lib$(BIT).a
endif

INCLUDE=
LIBS= $(LDFLAGS) -lACE

BINARY = $(patsubst %.cpp,%.o,$(wildcard *.cpp))

all:$(TARGET)

%.o:%.cpp
	$(CXX) -c $< -o $@ $(INCLUDE) $(CFLAGS)

$(TARGET):$(BINARY)
	@rm -rf $@
	ar rcs $@ $^
	ln -s $@ libeasyace5.6.a 

clean:
	@rm -rf ${BINARY} $(TARGET)

pkg:
	tar -czvf easyace.tgz ../easyace/*.h ../easyace/*.cpp ../easyace/*.txt ../easyace/easyace.* ../easyace/makefile*
	
